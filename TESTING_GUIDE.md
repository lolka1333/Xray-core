# –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

## üö® –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ `stream-up`
- GET –∑–∞–ø—Ä–æ—Å—ã –∫ Microsoft.com –ø–æ–ª—É—á–∞—é—Ç `EOF` –æ—à–∏–±–∫–∏
- –°–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–î–∏–∞–≥–Ω–æ–∑:** Microsoft.com –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É API `/api/v2/`

## üîß –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–∞—è XHTTP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–§–∞–π–ª—ã:** `simple_server.json` + `simple_client.json`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø—É—Ç—å: `/` –≤–º–µ—Å—Ç–æ `/api/v2/`
- –£–±—Ä–∞–Ω–∞ —Å–ª–æ–∂–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è (`decryption: "none"`)
- –†–µ–∂–∏–º `auto` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç 2: Cloudflare –¥–æ–º–µ–Ω
**–§–∞–π–ª—ã:** `cloudflare_server.json` + `cloudflare_client.json`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–º–µ–Ω: `www.cloudflare.com` (–±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π)
- –ü—É—Ç—å: `/api/` (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É Cloudflare)
- Cloudflare –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–æ–±–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### –í–∞—Ä–∏–∞–Ω—Ç 3: WebSocket —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
**–§–∞–π–ª—ã:** `ws_server.json` + `ws_client.json`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: `ws` –≤–º–µ—Å—Ç–æ `xhttp`
- –£–±—Ä–∞–Ω `flow: "xtls-rprx-vision"` (–Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å WS)
- –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª

## üìã –ü–æ—à–∞–≥–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–µ —Å–ª—É–∂–±—ã
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
sudo systemctl stop xray

# –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ
Ctrl+C (–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å xray)
```

### –®–∞–≥ 2: –¢–µ—Å—Ç –ø—Ä–æ—Å—Ç–æ–π XHTTP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –°–µ—Ä–≤–µ—Ä
sudo cp simple_server.json /opt/xray/config.json
sudo systemctl start xray
sudo journalctl -u xray -f

# –ö–ª–∏–µ–Ω—Ç (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
./xray -config .\simple_client.json
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –æ—à–∏–±–æ–∫ `EOF`, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ.

### –®–∞–≥ 3: –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —Ç–µ—Å—Ç Cloudflare
```bash
# –°–µ—Ä–≤–µ—Ä
sudo systemctl stop xray
sudo cp cloudflare_server.json /opt/xray/config.json
sudo systemctl start xray

# –ö–ª–∏–µ–Ω—Ç
./xray -config .\cloudflare_client.json
```

### –®–∞–≥ 4: –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —Ç–µ—Å—Ç WebSocket
```bash
# –°–µ—Ä–≤–µ—Ä
sudo systemctl stop xray
sudo cp ws_server.json /opt/xray/config.json
sudo systemctl start xray

# –ö–ª–∏–µ–Ω—Ç
./xray -config .\ws_client.json
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ü–µ–ª–µ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Microsoft.com
curl -I https://www.microsoft.com/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Cloudflare.com
curl -I https://www.cloudflare.com/api/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—É—Ç—å
curl -I https://www.microsoft.com/api/v2/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Reality –Ω–∞—Å—Ç—Ä–æ–µ–∫
```bash
# –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
"realitySettings": {
  "show": true,  // –î–æ–±–∞–≤–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
# –° –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
telnet 51.89.39.34 8443

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
nslookup www.microsoft.com
nslookup www.cloudflare.com
```

## ‚ö° –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–°–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π:**
   ```json
   "path": "/"
   ```

2. **–°–º–µ–Ω–∏—Ç–µ –¥–æ–º–µ–Ω –Ω–∞ Cloudflare:**
   ```json
   "host": "www.cloudflare.com"
   "dest": "www.cloudflare.com:443"
   ```

3. **–£–ø—Ä–æ—Å—Ç–∏—Ç–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—é:**
   ```json
   "decryption": "none"
   "encryption": "none"
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebSocket:**
   ```json
   "network": "ws"
   "flow": ""  // –£–±—Ä–∞—Ç—å xtls-rprx-vision
   ```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **simple_** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (—Å–∞–º—ã–µ –ø—Ä–æ—Å—Ç—ã–µ)
2. **cloudflare_** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–¥—Ä—É–≥–æ–π –¥–æ–º–µ–Ω)
3. **ws_** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç)

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```
[Info] transport/internet/splithttp: XHTTP is dialing to tcp:51.89.39.34:8443, mode auto
[Info] proxy/vless/outbound: tunneling request to tcp:example.com:443 via 51.89.39.34:8443
```

### –û—à–∏–±–∫–∞ (–Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é):
```
[Info] transport/internet/splithttp: failed to GET ... EOF
```

## üîß –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–ï—Å–ª–∏ –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º** - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç (443, 80)
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å Reality –∫–ª—é—á–∞–º–∏** - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ
3. **–§–∞–µ—Ä–≤–æ–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞

–ù–∞—á–Ω–∏—Ç–µ —Å **simple_** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π - –æ–Ω–∏ –∏–º–µ—é—Ç –Ω–∞–∏–±–æ–ª—å—à–∏–µ —à–∞–Ω—Å—ã –Ω–∞ —É—Å–ø–µ—Ö!